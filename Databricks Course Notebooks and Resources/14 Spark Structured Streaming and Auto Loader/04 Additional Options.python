{"version":"NotebookV1","origId":1137724266866950,"name":"04 Additional Options","language":"python","commands":[{"version":"CommandV1","origId":1137724266866951,"guid":"90df2190-3b61-47fd-9e2f-a335f8fd39cc","subtype":"command","commandType":"auto","position":1.0,"command":"%md\n# Spark Structured Streaming: Additional Options\n\n#### Resources:\n* Structured Streaming API: https://spark.apache.org/docs/latest/api/python/reference/pyspark.ss/index.html\n* DataStreamReader API: https://spark.apache.org/docs/latest/api/python/reference/pyspark.ss/api/pyspark.sql.streaming.DataStreamReader.html\n* DataStreamWriter API: https://spark.apache.org/docs/latest/api/python/reference/pyspark.ss/api/pyspark.sql.streaming.DataStreamWriter.html\n* Input / Output: https://spark.apache.org/docs/latest/api/python/reference/pyspark.ss/io.html\n* Query Management: https://spark.apache.org/docs/latest/api/python/reference/pyspark.ss/query_management.html","commandVersion":67,"state":"input","results":null,"resultDbfsStatus":"INLINED_IN_TREE","resultDbfsErrorMessage":null,"errorSummary":null,"errorTraceType":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"a user","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"metadata":{},"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"tableResultIndex":null,"listResultMetadata":null,"subcommandOptions":null,"contentSha256Hex":null,"nuid":"aef5b00d-3974-4d78-b0aa-725306cb3d6f"},{"version":"CommandV1","origId":1137724266866952,"guid":"057b79b6-cd7f-447b-ae43-4c577e812b32","subtype":"command","commandType":"auto","position":5.59375,"command":"# output mode append, this is set by default\norders_sdf.writeStream.format(\"delta\").\\\noutputMode(\"append\").\\ # can also be \"complete\" or \"update\"\noption(\"checkpointLocation\", checkpoint_loc).\\\nstart(sink_path)","commandVersion":29,"state":"input","results":null,"resultDbfsStatus":"INLINED_IN_TREE","resultDbfsErrorMessage":null,"errorSummary":null,"errorTraceType":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"a user","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"metadata":{},"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"tableResultIndex":null,"listResultMetadata":null,"subcommandOptions":null,"contentSha256Hex":null,"nuid":"54547f5c-97ec-476a-bda8-d3445d8b1d09"},{"version":"CommandV1","origId":1137724266866953,"guid":"1b424c54-a555-4b73-8f59-783fdc2bc4e1","subtype":"command","commandType":"auto","position":7.796875,"command":"# specify column to partition the data\norders_sdf.writeStream.format(\"delta\").\\\noutputMode(\"append\").\\\noption(\"checkpointLocation\", checkpoint_loc).\\\npartitionBy(\"column\").\\ \nstart(sink_path)","commandVersion":21,"state":"input","results":null,"resultDbfsStatus":"INLINED_IN_TREE","resultDbfsErrorMessage":null,"errorSummary":null,"errorTraceType":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"a user","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"metadata":{},"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"tableResultIndex":null,"listResultMetadata":null,"subcommandOptions":null,"contentSha256Hex":null,"nuid":"9d0bbd41-d6ae-4e90-b7bc-ba85767a69e0"},{"version":"CommandV1","origId":1137724266866954,"guid":"258b21f5-fdde-4506-beb2-6f9466481158","subtype":"command","commandType":"auto","position":10.0,"command":"# processing time 5 seconds trigger\norders_sdf.writeStream.format(\"delta\").trigger(processingTime='5 seconds').\\\noption(\"checkpointLocation\", checkpoint_loc).start(sink_path)","commandVersion":39,"state":"input","results":null,"resultDbfsStatus":"INLINED_IN_TREE","resultDbfsErrorMessage":null,"errorSummary":null,"errorTraceType":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"a user","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"metadata":{},"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"tableResultIndex":null,"listResultMetadata":null,"subcommandOptions":null,"contentSha256Hex":null,"nuid":"b275982b-35c9-4ab4-8a91-25dd68db421e"},{"version":"CommandV1","origId":1137724266866955,"guid":"36792c04-4ee3-4930-a9d7-30705ea0e388","subtype":"command","commandType":"auto","position":11.0,"command":"# run only once trigger\norders_sdf.writeStream.format(\"delta\").\\\ntrigger(once=True).\\\noption(\"checkpointLocation\", checkpoint_loc).\\\nstart(sink_path)","commandVersion":13,"state":"input","results":null,"resultDbfsStatus":"INLINED_IN_TREE","resultDbfsErrorMessage":null,"errorSummary":null,"errorTraceType":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"a user","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"metadata":{},"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"tableResultIndex":null,"listResultMetadata":null,"subcommandOptions":null,"contentSha256Hex":null,"nuid":"b05abae6-2d33-4f89-b966-e35c737505b2"}],"dashboards":[],"guid":"e6fc3e27-f9b6-4115-8ba0-aeb30c408456","globalVars":{},"iPythonMetadata":null,"inputWidgets":{},"notebookMetadata":{"pythonIndentUnit":4,"mostRecentlyExecutedCommandWithImplicitDF":{"commandId":1742751271326573,"dataframes":["_sqldf"]}},"reposExportFormat":"SOURCE"}