{"version":"NotebookV1","origId":1137724266866797,"name":"04 Secret Scopes","language":"python","commands":[{"version":"CommandV1","origId":1137724266866798,"guid":"dedf9a33-18fe-4882-bea1-8cd80e0a9b24","subtype":"command","commandType":"auto","position":0.5,"command":"%md\n# Secret Scopes\n\n#### Resources:\n* Secret Scopes: https://learn.microsoft.com/en-us/azure/databricks/security/secrets/secret-scopes\n* Secret Management: https://learn.microsoft.com/en-us/azure/databricks/security/secrets/","commandVersion":19,"state":"input","results":null,"resultDbfsStatus":"INLINED_IN_TREE","resultDbfsErrorMessage":null,"errorSummary":null,"errorTraceType":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"a user","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"metadata":{},"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"tableResultIndex":null,"listResultMetadata":[],"subcommandOptions":null,"contentSha256Hex":null,"nuid":"ec024c83-4de6-4939-8080-fa4c43283dca"},{"version":"CommandV1","origId":1137724266866799,"guid":"44fe7c28-5088-4793-965c-5ebb81aacd9d","subtype":"command","commandType":"auto","position":4.0,"command":"# Once you create a key vault, register your secrets and create a secret scope. You can access them via dbutils  \ndbutils.secrets.get(scope=\"YOUR SCOPE HERE\", key=\"YOUR SECRET KEY HERE\")","commandVersion":61,"state":"finished","results":{"type":"listResults","data":[{"type":"html","data":"<div class=\"ansiout\">Out[9]: &#39;[REDACTED]&#39;</div>","arguments":{},"addedWidgets":{},"removedWidgets":[],"datasetInfos":[],"metadata":{}}],"arguments":{},"addedWidgets":{},"removedWidgets":[],"datasetInfos":[],"metadata":{"isDbfsCommandResult":false}},"resultDbfsStatus":"INLINED_IN_TREE","resultDbfsErrorMessage":null,"errorSummary":null,"errorTraceType":null,"error":null,"workflows":[],"startTime":1666885291248,"submitTime":1666885291220,"finishTime":1666885291357,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"a user","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"metadata":{},"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"tableResultIndex":null,"listResultMetadata":[["html",55]],"subcommandOptions":null,"contentSha256Hex":null,"nuid":"6856f076-101f-4db8-b420-cf993996051c"},{"version":"CommandV1","origId":1137724266866800,"guid":"3f9766f3-da67-475c-9a7e-82ba989ab20a","subtype":"command","commandType":"auto","position":6.0,"command":"application_id = dbutils.secrets.get(scope=\"YOUR SCOPE HERE\", key=\"YOUR SECRET KEY HERE\")\ntenant_id = dbutils.secrets.get(scope=\"YOUR SCOPE HERE\", key=\"YOUR SECRET KEY HERE\")\nsecret = dbutils.secrets.get(scope=\"YOUR SCOPE HERE\", key=\"YOUR SECRET KEY HERE\")","commandVersion":19,"state":"finished","results":{"type":"listResults","data":[{"type":"html","data":"<div class=\"ansiout\"></div>","arguments":{},"addedWidgets":{},"removedWidgets":[],"datasetInfos":[],"metadata":{}}],"arguments":{},"addedWidgets":{},"removedWidgets":[],"datasetInfos":[],"metadata":{"isDbfsCommandResult":false}},"resultDbfsStatus":"INLINED_IN_TREE","resultDbfsErrorMessage":null,"errorSummary":null,"errorTraceType":null,"error":null,"workflows":[],"startTime":1666885369624,"submitTime":1666885369592,"finishTime":1666885370008,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"a user","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"metadata":{},"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"tableResultIndex":null,"listResultMetadata":[["html",27]],"subcommandOptions":null,"contentSha256Hex":null,"nuid":"0861f808-7978-4bf4-87e2-9b8ca2e7e592"},{"version":"CommandV1","origId":1137724266866801,"guid":"bcf5b02a-dbf9-4835-a4bd-7208644f1165","subtype":"command","commandType":"auto","position":6.5,"command":"container_name = 'YOUR CONTAINER NAME HERE'\naccount_name = 'YOUR ACCOUNT NAME HERE'\nmount_point = 'YOUR MOUNT POINT PATH HERE'","commandVersion":21,"state":"input","results":null,"resultDbfsStatus":"INLINED_IN_TREE","resultDbfsErrorMessage":null,"errorSummary":null,"errorTraceType":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"a user","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"metadata":{},"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"tableResultIndex":null,"listResultMetadata":[],"subcommandOptions":null,"contentSha256Hex":null,"nuid":"e9fb0977-52ce-473d-b776-428dce1b667e"},{"version":"CommandV1","origId":1137724266866802,"guid":"b615838f-87d4-482c-b858-7e60500b9e9b","subtype":"command","commandType":"auto","position":7.0,"command":"configs = {\"fs.azure.account.auth.type\": \"OAuth\",\n          \"fs.azure.account.oauth.provider.type\": \"org.apache.hadoop.fs.azurebfs.oauth2.ClientCredsTokenProvider\",\n          \"fs.azure.account.oauth2.client.id\": application_id,\n          \"fs.azure.account.oauth2.client.secret\": secret,\n          \"fs.azure.account.oauth2.client.endpoint\": f\"https://login.microsoftonline.com/{tenant_id}/oauth2/token\"}\n\n# Optionally, you can add <directory-name> to the source URI of your mount point.\ndbutils.fs.mount(\n  source = f\"abfss://{container_name}@{account_name}.dfs.core.windows.net/\",\n  mount_point = mount_point,\n  extra_configs = configs)","commandVersion":1,"state":"finished","results":{"type":"listResults","data":[{"type":"html","data":"<div class=\"ansiout\">Out[11]: True</div>","arguments":{},"addedWidgets":{},"removedWidgets":[],"datasetInfos":[],"metadata":{}}],"arguments":{},"addedWidgets":{},"removedWidgets":[],"datasetInfos":[],"metadata":{"isDbfsCommandResult":false}},"resultDbfsStatus":"INLINED_IN_TREE","resultDbfsErrorMessage":null,"errorSummary":null,"errorTraceType":null,"error":null,"workflows":[],"startTime":1666885384660,"submitTime":1666885384624,"finishTime":1666885405334,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"a user","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"metadata":{},"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"tableResultIndex":null,"listResultMetadata":[["html",40]],"subcommandOptions":null,"contentSha256Hex":null,"nuid":"9a1c6c72-b7e2-4fac-8c08-7b08b97c7d06"}],"dashboards":[],"guid":"1cb6b243-0346-4eb7-a28a-8876104607fe","globalVars":{},"iPythonMetadata":null,"inputWidgets":{},"notebookMetadata":{"pythonIndentUnit":4},"reposExportFormat":"SOURCE"}